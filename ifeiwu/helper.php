<?php
 function db($config = array()) { return ifeiwu\Db::getInstance($config); } function cache($adapter = null) { return ifeiwu\Cache::getInstance($adapter); } function session($name, $value = '', $prefix = null) { $session = ifeiwu\Session::getInstance(); if (is_null($name)) { $session->clear($value); } elseif ($value === '') { return strpos($name, '?') === 0 ? $session->has(substr($name, 1), $prefix) : $session->get($name, $prefix); } elseif (is_null($value)) { $session->delete($name, $prefix); } else { $session->set($name, $value, $prefix); } } function cookie($name, $value = '', $prefix = null) { $cookie = ifeiwu\Cookie::getInstance(); if (is_null($name)) { $cookie->clear(); } elseif ($value === '') { return $cookie->get($name, $prefix); } elseif (is_null($value)) { $cookie->delete($name, $prefix); } else { $cookie->set($name, $value, $prefix); } } function request($name, $method = 'post') { if ($method == 'post') { return trim($_POST[$name]); } elseif ($method == 'get') { return trim($_GET[$name]); } else { return trim($_REQUEST[$name]); } } function app($name, $value = '') { if (is_array($name)) { foreach ($name as $key => $value) { ifeiwu\App::set($key, $value); } } elseif($value === '') { return ifeiwu\App::get($name); } else { ifeiwu\App::set($name, $value); } } function error($message = '', $data = null) { response(1, $message, $data); } function success($message = '', $data = null) { response(0, $message, $data); } function response($code = 0, $message = '', $data = null) { if (is_array($code)) { ifeiwu\Response::json($code); } $res = array(); $res['code'] = $code; if (is_array($message)) { $res['data'] = $message; } else { $res['message'] = $message; } if (is_array($data)) { $res['data'] = $data; } ifeiwu\Response::json($res); } function redirect($url) { ifeiwu\Response::redirect($url); } function logger($message) { ifeiwu\Log::getInstance()->error($message); } function console($message) { $log = ifeiwu\Log::getInstance(); $log->setAdapter('chrome'); $log->debug($message); } function dump($value) { echo '<pre>' . print_r($value, 1) . '</pre>'; }