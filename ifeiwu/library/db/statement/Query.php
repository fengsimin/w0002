<?php
namespace ifeiwu\db\statement; use ifeiwu\Exception; use ifeiwu\db\StatementAbstract; class Query extends StatementAbstract { public function __construct($db, $sql, $values) { $this->db = $db; $this->sql = $sql; $this->values = $values; if ($this->db->getDebug() == true) { $this->db->setLog($this->debug()); } $this->stmt = $this->db->prepare($this->sql); $this->stmt->execute($this->values); } public function get($num = null) { if (!is_null($num)) { return $this->stmt->fetchColumn($num); } else { return $this->stmt->fetch(); } } public function all() { return $this->stmt->fetchAll(); } public function has() { return $this->stmt->fetch() ? true : false; } public function columnCount() { return $this->stmt->columnCount(); } public function getColumnMeta($column) { return $this->stmt->getColumnMeta($column); } public function run() { return $this->stmt; } public function dump() { echo '<pre>' . print_r($this->stmt->fetchAll(), 1) . '</pre>';; } } 