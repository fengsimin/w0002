<?php
namespace ifeiwu\db\statement; use ifeiwu\exception\DbException; use ifeiwu\db\StatementAbstract; class Update extends StatementAbstract { protected $is = false; public function __construct($db, $table, $data, $wheres) { $this->db = $db; $this->sql = 'UPDATE `' . $table . '` SET '; foreach ($data as $key => $value) { $this->values[] = $value; $this->sql .= '`' . $key . '`' . ' = ?, '; } if ($this->values) { $this->sql = substr($this->sql, 0, -2); if ($wheres !== true) { $this->where($wheres); } if ($this->db->getDebug() == true) { $this->db->setLog($this->debug()); } } $this->stmt = $this->db->prepare($this->sql); $this->is = $this->stmt->execute($this->values); } public function is() { return $this->is; } public function run() { return $this->stmt; } } 