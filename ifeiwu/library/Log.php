<?php
namespace ifeiwu; use ifeiwu\log\AdapterInterface; use ifeiwu\log\adapter\Chrome; use ifeiwu\log\adapter\Email; use ifeiwu\log\adapter\File; use ifeiwu\Config; class Log { private $adapter; private static $_instance; public static function getInstance($adapter = null) { if (!(self::$_instance instanceof self)) { self::$_instance = new self($adapter); } return self::$_instance; } private function __construct($adapter) { $this->setAdapter($adapter); } public function setAdapter($adapter) { $config = Config::get('log'); if ($adapter == 'chrome') { $this->adapter = new Chrome(); } elseif ($adapter == 'email') { $this->adapter = new Email($config['email']); } else { $this->adapter = new File($config['file']); } } public function error($message, $context = array()) { $this->adapter->error($message, $context); } public function debug($message, $context = array()) { $this->adapter->debug($message, $context); } }