<?php
//Copyright (c) 2016 iFeiwu.com
 class Site extends Item { function __construct() { $this->table = "\x73\151\164\x65"; parent::__construct(); } protected function getData() { goto zuCt5; I2Bhc: foreach ($data as $d) { goto ABXSt; ABXSt: $value = $d["\x76\x61\154\x75\x65"]; goto YigLR; GBXZn: S7KGj: goto oWJ3R; Vc3kb: $site[$d["\x6e\x61\x6d\x65"]] = $value; goto GBXZn; YigLR: if (!($value != '')) { goto S7KGj; } goto Vc3kb; oWJ3R: u7iBW: goto UkT8X; UkT8X: } goto ESSqw; s4OoC: return $this->success($site); goto uf6JD; ESSqw: TXLh0: goto s4OoC; mF2O1: $site = array(); goto I2Bhc; zuCt5: $data = $this->db->select($this->table)->all(); goto mF2O1; uf6JD: } protected function postSave($request_data) { goto cuNk2; hqfLy: return $this->error("\xe5\xb7\xb2\xe4\277\235\345\xad\x98\xe5\244\xb1\350\264\245\357\xbc\201"); goto pOSBe; cuNk2: $this->_removeFiles2($request_data["\x5f\162\x65\x6d\x6f\x76\x65\x66\151\154\145\x73"]); goto ffN7k; B_rVY: return $this->success("\345\267\xb2\xe4\277\x9d\xe5\255\x98\346\x9b\264\346\224\xb9\xef\xbc\201"); goto NKvSD; NKvSD: nAcWT: goto fc14V; pOSBe: goto nAcWT; goto EZvHZ; fhmxL: $this->_log("\165\x70\144\141\164\x65", array("\x74\151\x74\x6c\x65" => "\347\xbd\221\xe7\253\231\350\xae\xbe\xe7\275\xae")); goto B_rVY; yYHr5: foreach ($request_data as $name => $value) { goto C0hLY; tznne: QhPZV: goto aDG70; ZQm6y: goto jEpE1; goto agv_q; y7ei5: if (!($this->db->insert($this->table, array("\156\141\x6d\x65" => $name, "\x76\x61\154\x75\x65" => $value))->is() === false)) { goto ysYJ6; } goto dgCCV; dgCCV: $error[] = $name; goto xRV9x; xRV9x: ysYJ6: goto M2SGt; uxHFH: if (!($this->db->update($this->table, array("\x76\x61\154\x75\145" => $value), array("\156\x61\155\145", "\x3d", $name))->is() === false)) { goto aTb81; } goto unrO3; hXUB_: if ($count <= 0) { goto NzA1y; } goto uxHFH; agv_q: NzA1y: goto y7ei5; z60S4: $value = $this->_encode($value); goto hXUB_; qNVYY: aTb81: goto ZQm6y; M2SGt: jEpE1: goto tznne; C0hLY: $count = $this->db->select($this->table)->where(array("\x6e\x61\155\x65", "\75", $name))->count(); goto z60S4; unrO3: $error[] = $name; goto qNVYY; aDG70: } goto DZppK; Xsbm3: $this->db->commit(); goto fhmxL; EZvHZ: HnTlE: goto Xsbm3; a1syM: $this->db->beginTransaction(); goto yYHr5; DZppK: sRcZY: goto S6OMe; S6OMe: if (count($error) === 0) { goto HnTlE; } goto ZCw_Y; ZA4rw: $error = array(); goto a1syM; ZCw_Y: $this->db->rollBack(); goto hqfLy; ffN7k: unset($request_data["\x74\157\x6b\x65\x6e"], $request_data["\141\144\x6d\151\x6e"], $request_data["\x5f\x72\145\155\x6f\166\145\x66\151\154\145\163"]); goto ZA4rw; fc14V: } protected function postSkin($request_data) { goto JX9tT; lfn9f: qtD4i: goto rLuTa; rLuTa: return $this->success("\xe5\267\262\344\277\235\345\255\x98\346\233\xb4\346\224\xb9\xef\xbc\201"); goto p6wM3; Qc98G: $filename = "\x2e\56\57\x61\163\163\x65\x74\57\x63\163\x73\x2f\163\x74\x79\x6c\x65\x2e\x63\163\163"; goto K_eox; ev1Hj: foreach ($request_data as $name => $value) { $this->_saveData($this->table, array("\156\141\x6d\145" => $name, "\166\x61\x6c\x75\145" => $value), array("\x6e\141\x6d\145", "\x3d", $name)); ZmKrK: } goto lfn9f; LM1TU: $skins = explode("\55", $request_data["\164\150\145\x6d\145\x2d\163\153\x69\x6e"]); goto Wek6e; kkBeB: $request_data["\163\x6b\x69\156"] = $skins[1]; goto WFw2E; Wek6e: $request_data["\x74\150\145\x6d\145"] = $skins[0]; goto kkBeB; WFw2E: yf1uu: goto ev1Hj; SzZVQ: aiex2: goto ZFptT; K_eox: file_put_contents($filename, $request_data["\163\x74\171\x6c\x65\x2d\x63\157\144\145"]); goto GI1vX; GI1vX: chmod($filename, 420); goto SzZVQ; ZFptT: unset($request_data["\x74\x6f\x6b\145\156"], $request_data["\x61\144\155\x69\x6e"], $request_data["\163\164\x79\x6c\145\x2d\143\157\144\145"]); goto x0tI8; JX9tT: if (!isset($request_data["\x73\164\171\154\x65\x2d\143\x6f\144\145"])) { goto aiex2; } goto Qc98G; x0tI8: if (!isset($request_data["\x74\150\145\x6d\145\x2d\163\x6b\x69\x6e"])) { goto yf1uu; } goto LM1TU; p6wM3: } protected function getStyleCode() { $code = file_get_contents("\x2e\56\x2f\x61\x73\163\x65\164\x2f\143\x73\163\x2f\163\164\171\154\145\56\143\x73\x73"); return $this->success(array($code)); } }
